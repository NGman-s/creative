# LifeLens (智眼生活) - Phase 1 MVP

LifeLens 是一款专为“智慧餐饮”设计的 AI 原生移动应用。它利用多模态大语言模型 (Qwen3-VL-Flash)，通过“镜头即入口”的交互界面，提供实时的营养分析服务。

## 🚀 核心功能
- **镜头即入口 (Camera-First)**: 应用启动后直接进入食物扫描模式，极简交互。
- **AI 视觉分析**: 由 Qwen3-VL-Flash 驱动，实现极速的菜品识别与营养价值估算（适配最新 Qwen3 视觉系列）。
- **硬核科技感 HUD UI**: 沉浸式 AR 风格覆盖层，实时显示营养数据和“红绿灯”健康评级。
- **个性化建议**: 基于用户画像（年龄、健身目标、健康状况）提供针对性的饮食建议。
- **演示稳定性保障**: 内置“Mock 模式”和“自动降级”逻辑，确保在比赛现场等不稳定网络环境下演示顺畅。
- **本地历史记录**: 在本地保存分析结果，方便随时回顾饮食趋势。

## 🛠 技术栈
- **前端**: Uni-app (Vue3 + Vite + Pinia)
- **后端**: Python FastAPI + Uvicorn
- **AI**: Qwen3-VL-Flash (通过 DashScope API 接入)

## 📂 项目结构
```
.
├── frontend/               # Uni-app 前端项目
│   ├── src/
│   │   ├── components/     # HUD 遮罩组件 (含动态日志、进度条)
│   │   ├── pages/          # 首页 (相机)、个人档案、历史记录
│   │   ├── store/          # Pinia 状态管理 (用户/历史)
│   │   └── utils/          # 网络请求、图片处理、真机权限工具
├── backend/                # FastAPI 后端项目
│   ├── services/           # Qwen-VL 集成服务 (CoT 推理)
│   ├── temp_images/        # 临时图像存储
│   ├── test_api.py         # 独立 API 验证脚本
│   └── main.py             # API 入口
└── PRD.md                  # 产品需求文档 (PRD)
```

## 📝 开发进度总结 (Status Report)

### ✅ Phase 1 已完成工作 (Completed)
1.  **架构搭建**: 实现了 Uni-app 与 FastAPI 的全链路对接，支持多模态数据交互。
2.  **视觉特效 (VFX)**:
    *   实现了带有**动态扫描日志**和**高科技进度条**的 AR 遮罩层。
    *   增加了**文字闪烁 (Flicker)** 和 HUD 装饰元素，增强科技氛围感。
3.  **机型适配与性能**:
    *   支持**全屏安全区 (Safe Area)** 适配，兼容刘海屏与手势条机型。
    *   实现了前端图片压缩算法，显著降低上传延迟。
    *   集成了 `permission.js` 处理真机相机与存储权限。
4.  **AI 推理进阶**:
    *   引入 **Chain of Thought (思维链)** 指令，AI 会展示其逻辑推理过程 (`LOGIC_FLOW`)。
    *   强化了**健康安全验证**，对糖尿病、高血压等病症的营养警告更加灵敏。
5.  **竞赛演示增强**:
    *   **动态 Mock 逻辑**: Mock 模式现在能根据用户设置的健康目标（如增肌、减脂、糖尿病）返回对应的模拟推理数据。
    *   **自动降级机制**: 5秒接口超时自动转入 Mock 流程。

### 🚧 待完成/未来规划 (Roadmap)
1.  **OCR 标签追踪**: 结合 AR 技术，尝试在画面中对特定食物位置进行动态锚点标注。
2.  **饮食趋势报表**: 基于历史记录生成周度/月度的营养摄入分析图表。
3.  **多模态对话反馈**: 在分析结果下增加语音助手或文字对话，允许用户追问“为什么米饭不推荐吃这么多？”。
4.  **云端同步**: 引入用户系统，支持多端历史记录同步。

## 🏁 快速开始

### 后端配置
1. 进入 `backend` 目录。
2. 安装依赖: `pip install -r requirements.txt`
3. 配置环境变量: 在 `.env` 中填入你的 `DASHSCOPE_API_KEY`。
4. 启动服务器: `python main.py`

### 前端配置
1. 进入 `frontend` 目录。
2. 安装依赖: `npm install`
3. 配置 API 地址: 修改 `src/utils/request.js` 中的 `BASE_URL` 为服务器局域网 IP。
4. 运行 H5 版本: `npm run dev:h5` (或通过 HBuilderX 运行)。

## 📺 演示模式说明
- **激活 Mock 模式**: 快速点击页面左上角的 LifeLens Logo **5 次**。
- **模式优势**: 在无网或极弱网环境下，依然能流畅展示 AI 的识别、推理及反馈流程。
